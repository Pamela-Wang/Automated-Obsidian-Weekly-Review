/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
__export(exports, {
  default: () => FileCleanerPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/settings.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/translations/helper.ts
var import_obsidian = __toModule(require("obsidian"));

// src/translations/locale/en.ts
var en_default = {
  cleanedFilesName: "Cleaned files",
  cleanedFilesDesc: "What do you want to do with cleaned files?",
  systemTrashOption: "Move to system trash",
  obsidianTrashOption: "Move to Obsidian trash (.trash folder)",
  deleteOption: "Permanently delete",
  doCleanNotice: "Clean successful",
  doNotCleanNotice: "No file to clean"
};

// src/translations/locale/zh-cn.ts
var zh_cn_default = {
  cleanedFilesName: "\u6E05\u7406\u6587\u4EF6",
  cleanedFilesDesc: "\u8981\u5982\u4F55\u5904\u7406\u5DF2\u6E05\u7406\u7684\u6587\u4EF6\uFF1F",
  deleteOption: "\u6C38\u4E45\u5220\u9664",
  systemTrashOption: "\u79FB\u81F3\u7CFB\u7EDF\u56DE\u6536\u7AD9",
  obsidianTrashOption: "\u79FB\u81F3\u8F6F\u4EF6\u56DE\u6536\u7AD9\uFF08.trash \u6587\u4EF6\u5939\uFF09",
  doCleanNotice: "\u6E05\u7406\u6210\u529F",
  doNotCleanNotice: "\u6CA1\u6709\u6587\u4EF6\u9700\u8981\u6E05\u7406"
};

// src/translations/helper.ts
var localeMap = {
  en: en_default,
  "zh-cn": zh_cn_default
};
var locale = localeMap[import_obsidian.moment.locale()];
function t(str) {
  return locale && locale[str] || en_default[str];
}

// src/settings.ts
var DEFAULT_SETTINGS = {
  destination: "system"
};
var FileCleanerSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    this.containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName(t("cleanedFilesName")).setDesc(t("cleanedFilesDesc")).addDropdown((dropdown) => dropdown.addOption("system", t("systemTrashOption")).addOption("obsidian", t("obsidianTrashOption")).addOption("permanent", t("deleteOption")).setValue(this.plugin.settings.destination).onChange((value) => {
      this.plugin.settings.destination = value;
      this.plugin.saveSettings();
    }));
  }
};

// src/util.ts
var getEmptyMdFiles = (app) => {
  let mdFiles = app.vault.getMarkdownFiles();
  let emptyMdFiles = [];
  for (let file of mdFiles) {
    if (file.stat.size === 0) {
      emptyMdFiles.push(file);
    }
  }
  return emptyMdFiles;
};
var getUnusedAttachments = (app) => {
  let files = app.vault.getFiles();
  const attachmentRegex = /(.jpg|.jpeg|.png|.gif|.svg|.pdf)$/i;
  let attachments = [];
  for (let file of files) {
    if (file.name.match(attachmentRegex)) {
      attachments.push(file);
    }
  }
  let usedAttachments = [];
  let resolvedLinks = app.metadataCache.resolvedLinks;
  if (resolvedLinks) {
    for (const [mdFile, links] of Object.entries(resolvedLinks)) {
      for (const [path, times] of Object.entries(resolvedLinks[mdFile])) {
        let attachmentMatch = path.match(attachmentRegex);
        if (attachmentMatch) {
          let file = app.vault.getAbstractFileByPath(path);
          usedAttachments.push(file);
        }
      }
    }
  }
  let unusedAttachments = attachments.filter((file) => !usedAttachments.includes(file));
  return unusedAttachments;
};

// src/main.ts
var FileCleanerPlugin = class extends import_obsidian3.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addRibbonIcon("trash", "File Cleaner", () => __async(this, null, function* () {
        let emptyMdFiles = getEmptyMdFiles(this.app);
        let unusedAttachments = getUnusedAttachments(this.app);
        let cleanFiles = [...emptyMdFiles, ...unusedAttachments];
        let len = cleanFiles.length;
        if (len > 0) {
          let destination = this.settings.destination;
          for (let file of cleanFiles) {
            console.log(file.name + " cleaned");
            if (destination === "permanent") {
              yield this.app.vault.delete(file);
            } else if (destination === "system") {
              yield this.app.vault.trash(file, true);
            } else if (destination === "obsidian") {
              yield this.app.vault.trash(file, false);
            }
          }
          new import_obsidian3.Notice(t("doCleanNotice"));
        } else {
          new import_obsidian3.Notice(t("doNotCleanNotice"));
        }
      }));
      this.addSettingTab(new FileCleanerSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy90cmFuc2xhdGlvbnMvaGVscGVyLnRzIiwgInNyYy90cmFuc2xhdGlvbnMvbG9jYWxlL2VuLnRzIiwgInNyYy90cmFuc2xhdGlvbnMvbG9jYWxlL3poLWNuLnRzIiwgInNyYy91dGlsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xyXG5cdEFwcCxcclxuXHRFZGl0b3IsXHJcblx0TWFya2Rvd25WaWV3LFxyXG5cdE1vZGFsLFxyXG5cdE5vdGljZSxcclxuXHRQbHVnaW4sXHJcblx0UGx1Z2luU2V0dGluZ1RhYixcclxuXHRTZXR0aW5nLFxyXG5cdFRGaWxlLFxyXG59IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQge1xyXG5cdEZpbGVDbGVhbmVyU2V0dGluZ3MsXHJcblx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHRGaWxlQ2xlYW5lclNldHRpbmdUYWIsXHJcbn0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgZ2V0RW1wdHlNZEZpbGVzLCBnZXRVbnVzZWRBdHRhY2htZW50cyB9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IHsgdCB9IGZyb20gXCIuL3RyYW5zbGF0aW9ucy9oZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVDbGVhbmVyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRwbHVnaW46IEZpbGVDbGVhbmVyUGx1Z2luO1xyXG5cdHNldHRpbmdzOiBGaWxlQ2xlYW5lclNldHRpbmdzO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcInRyYXNoXCIsIFwiRmlsZSBDbGVhbmVyXCIsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU2RTA1XHU3NDA2XHU2NTg3XHU0RUY2XHJcblx0XHRcdGxldCBlbXB0eU1kRmlsZXMgPSBnZXRFbXB0eU1kRmlsZXModGhpcy5hcHApO1xyXG5cdFx0XHRsZXQgdW51c2VkQXR0YWNobWVudHMgPSBnZXRVbnVzZWRBdHRhY2htZW50cyh0aGlzLmFwcCk7XHJcblx0XHRcdGxldCBjbGVhbkZpbGVzOiBURmlsZVtdID0gWy4uLmVtcHR5TWRGaWxlcywgLi4udW51c2VkQXR0YWNobWVudHNdO1xyXG5cclxuXHRcdFx0Ly8gXHU2MjY3XHU4ODRDXHU2RTA1XHU3NDA2XHJcblx0XHRcdGxldCBsZW4gPSBjbGVhbkZpbGVzLmxlbmd0aDtcclxuXHRcdFx0aWYgKGxlbiA+IDApIHtcclxuXHRcdFx0XHRsZXQgZGVzdGluYXRpb24gPSB0aGlzLnNldHRpbmdzLmRlc3RpbmF0aW9uO1xyXG5cdFx0XHRcdGZvciAobGV0IGZpbGUgb2YgY2xlYW5GaWxlcykge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZmlsZS5uYW1lICsgXCIgY2xlYW5lZFwiKTtcclxuXHRcdFx0XHRcdGlmIChkZXN0aW5hdGlvbiA9PT0gXCJwZXJtYW5lbnRcIikge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoZmlsZSk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uID09PSBcInN5c3RlbVwiKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LnRyYXNoKGZpbGUsIHRydWUpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbiA9PT0gXCJvYnNpZGlhblwiKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LnRyYXNoKGZpbGUsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bmV3IE5vdGljZSh0KFwiZG9DbGVhbk5vdGljZVwiKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSh0KFwiZG9Ob3RDbGVhbk5vdGljZVwiKSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRmlsZUNsZWFuZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHt9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxyXG5cdFx0XHR7fSxcclxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7XG5cdEFwcCxcblx0RWRpdG9yLFxuXHRNYXJrZG93blZpZXcsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmlsZUNsZWFuZXJQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgdCB9IGZyb20gXCIuL3RyYW5zbGF0aW9ucy9oZWxwZXJcIjtcblxuLy9cdTVCOUFcdTRFNDlcdThCQkVcdTdGNkVcdTYzQTVcdTUzRTNcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUNsZWFuZXJTZXR0aW5ncyB7XG5cdGRlc3RpbmF0aW9uOiBzdHJpbmc7XG59XG5cbi8vXHU1QjlBXHU0RTQ5XHU5RUQ4XHU4QkE0XHU4QkJFXHU3RjZFXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmlsZUNsZWFuZXJTZXR0aW5ncyA9IHtcblx0ZGVzdGluYXRpb246IFwic3lzdGVtXCIsXG59O1xuXG4vL1x1OEJCRVx1N0Y2RVx1OTAwOVx1OTg3OVx1NTM2MVxuZXhwb3J0IGNsYXNzIEZpbGVDbGVhbmVyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEZpbGVDbGVhbmVyUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEZpbGVDbGVhbmVyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUodChcImNsZWFuZWRGaWxlc05hbWVcIikpXG5cdFx0XHQuc2V0RGVzYyh0KFwiY2xlYW5lZEZpbGVzRGVzY1wiKSlcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInN5c3RlbVwiLCB0KFwic3lzdGVtVHJhc2hPcHRpb25cIikpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcIm9ic2lkaWFuXCIsIHQoXCJvYnNpZGlhblRyYXNoT3B0aW9uXCIpKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJwZXJtYW5lbnRcIiwgdChcImRlbGV0ZU9wdGlvblwiKSlcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzdGluYXRpb24pXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzdGluYXRpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgZW4gZnJvbSBcIi4vbG9jYWxlL2VuXCI7XG5pbXBvcnQgemhDTiBmcm9tIFwiLi9sb2NhbGUvemgtY25cIjtcblxuY29uc3QgbG9jYWxlTWFwOiB7IFtrOiBzdHJpbmddOiBQYXJ0aWFsPHR5cGVvZiBlbj4gfSA9IHtcblx0ZW4sXG5cdFwiemgtY25cIjogemhDTixcbn07XG5cbmNvbnN0IGxvY2FsZSA9IGxvY2FsZU1hcFttb21lbnQubG9jYWxlKCldO1xuXG5leHBvcnQgZnVuY3Rpb24gdChzdHI6IGtleW9mIHR5cGVvZiBlbik6IHN0cmluZyB7XG5cdHJldHVybiAobG9jYWxlICYmIGxvY2FsZVtzdHJdKSB8fCBlbltzdHJdO1xufVxuIiwgIi8vRW5nbGlzaFxuZXhwb3J0IGRlZmF1bHQge1xuXHRjbGVhbmVkRmlsZXNOYW1lOiBcIkNsZWFuZWQgZmlsZXNcIixcblx0Y2xlYW5lZEZpbGVzRGVzYzogXCJXaGF0IGRvIHlvdSB3YW50IHRvIGRvIHdpdGggY2xlYW5lZCBmaWxlcz9cIixcblx0c3lzdGVtVHJhc2hPcHRpb246IFwiTW92ZSB0byBzeXN0ZW0gdHJhc2hcIixcblx0b2JzaWRpYW5UcmFzaE9wdGlvbjogXCJNb3ZlIHRvIE9ic2lkaWFuIHRyYXNoICgudHJhc2ggZm9sZGVyKVwiLFxuXHRkZWxldGVPcHRpb246IFwiUGVybWFuZW50bHkgZGVsZXRlXCIsXG5cdGRvQ2xlYW5Ob3RpY2U6IFwiQ2xlYW4gc3VjY2Vzc2Z1bFwiLFxuXHRkb05vdENsZWFuTm90aWNlOiBcIk5vIGZpbGUgdG8gY2xlYW5cIixcbn07XG4iLCAiLy9cdTdCODBcdTRGNTNcdTRFMkRcdTY1ODdcbmV4cG9ydCBkZWZhdWx0IHtcblx0Y2xlYW5lZEZpbGVzTmFtZTogXCJcdTZFMDVcdTc0MDZcdTY1ODdcdTRFRjZcIixcblx0Y2xlYW5lZEZpbGVzRGVzYzogXCJcdTg5ODFcdTU5ODJcdTRGNTVcdTU5MDRcdTc0MDZcdTVERjJcdTZFMDVcdTc0MDZcdTc2ODRcdTY1ODdcdTRFRjZcdUZGMUZcIixcblx0ZGVsZXRlT3B0aW9uOiBcIlx1NkMzOFx1NEU0NVx1NTIyMFx1OTY2NFwiLFxuXHRzeXN0ZW1UcmFzaE9wdGlvbjogXCJcdTc5RkJcdTgxRjNcdTdDRkJcdTdFREZcdTU2REVcdTY1MzZcdTdBRDlcIixcblx0b2JzaWRpYW5UcmFzaE9wdGlvbjogXCJcdTc5RkJcdTgxRjNcdThGNkZcdTRFRjZcdTU2REVcdTY1MzZcdTdBRDlcdUZGMDgudHJhc2ggXHU2NTg3XHU0RUY2XHU1OTM5XHVGRjA5XCIsXG5cdGRvQ2xlYW5Ob3RpY2U6IFwiXHU2RTA1XHU3NDA2XHU2MjEwXHU1MjlGXCIsXG5cdGRvTm90Q2xlYW5Ob3RpY2U6IFwiXHU2Q0ExXHU2NzA5XHU2NTg3XHU0RUY2XHU5NzAwXHU4OTgxXHU2RTA1XHU3NDA2XCIsXG59O1xuIiwgImltcG9ydCB7XG5cdEFwcCxcblx0RWRpdG9yLFxuXHRNYXJrZG93blZpZXcsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0VEZpbGUsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY29uc3QgZ2V0RW1wdHlNZEZpbGVzID0gKGFwcDogQXBwKSA9PiB7XG5cdC8vIFx1ODNCN1x1NTNENk1hcmtkb3duXHU2NTg3XHU0RUY2XG5cdGxldCBtZEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuXHQvLyBcdTgzQjdcdTUzRDZcdTdBN0FcdTc2N0RNYXJrZG93blx1NjU4N1x1NEVGNlxuXHRsZXQgZW1wdHlNZEZpbGVzOiBURmlsZVtdID0gW107XG5cdGZvciAobGV0IGZpbGUgb2YgbWRGaWxlcykge1xuXHRcdGlmIChmaWxlLnN0YXQuc2l6ZSA9PT0gMCkge1xuXHRcdFx0ZW1wdHlNZEZpbGVzLnB1c2goZmlsZSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBlbXB0eU1kRmlsZXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VW51c2VkQXR0YWNobWVudHMgPSAoYXBwOiBBcHApID0+IHtcblx0Ly8gXHU4M0I3XHU1M0Q2XHU5NjQ0XHU0RUY2XG5cdGxldCBmaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xuXHRjb25zdCBhdHRhY2htZW50UmVnZXggPSAvKC5qcGd8LmpwZWd8LnBuZ3wuZ2lmfC5zdmd8LnBkZikkL2k7XG5cdGxldCBhdHRhY2htZW50czogVEZpbGVbXSA9IFtdO1xuXHRmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG5cdFx0aWYgKGZpbGUubmFtZS5tYXRjaChhdHRhY2htZW50UmVnZXgpKSB7XG5cdFx0XHRhdHRhY2htZW50cy5wdXNoKGZpbGUpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFx1ODNCN1x1NTNENlx1NURGMlx1NEY3Rlx1NzUyOFx1OTY0NFx1NEVGNlxuXHRsZXQgdXNlZEF0dGFjaG1lbnRzOiBhbnkgPSBbXTtcblx0bGV0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRpZiAocmVzb2x2ZWRMaW5rcykge1xuXHRcdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtwYXRoLCB0aW1lc10gb2YgT2JqZWN0LmVudHJpZXMocmVzb2x2ZWRMaW5rc1ttZEZpbGVdKSkge1xuXHRcdFx0XHRsZXQgYXR0YWNobWVudE1hdGNoID0gcGF0aC5tYXRjaChhdHRhY2htZW50UmVnZXgpO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudE1hdGNoKSB7XG5cdFx0XHRcdFx0bGV0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuXHRcdFx0XHRcdHVzZWRBdHRhY2htZW50cy5wdXNoKGZpbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gXHU4M0I3XHU1M0Q2XHU2NzJBXHU0RjdGXHU3NTI4XHU5NjQ0XHU0RUY2XG5cdGxldCB1bnVzZWRBdHRhY2htZW50cyA9IGF0dGFjaG1lbnRzLmZpbHRlcihcblx0XHQoZmlsZSkgPT4gIXVzZWRBdHRhY2htZW50cy5pbmNsdWRlcyhmaWxlKVxuXHQpO1xuXG5cdHJldHVybiB1bnVzZWRBdHRhY2htZW50cztcbn07XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQVVPOzs7QUNWUCx1QkFTTzs7O0FDVFAsc0JBQXVCOzs7QUNDdkIsSUFBTyxhQUFRO0FBQUEsRUFDZCxrQkFBa0I7QUFBQSxFQUNsQixrQkFBa0I7QUFBQSxFQUNsQixtQkFBbUI7QUFBQSxFQUNuQixxQkFBcUI7QUFBQSxFQUNyQixjQUFjO0FBQUEsRUFDZCxlQUFlO0FBQUEsRUFDZixrQkFBa0I7QUFBQTs7O0FDUG5CLElBQU8sZ0JBQVE7QUFBQSxFQUNkLGtCQUFrQjtBQUFBLEVBQ2xCLGtCQUFrQjtBQUFBLEVBQ2xCLGNBQWM7QUFBQSxFQUNkLG1CQUFtQjtBQUFBLEVBQ25CLHFCQUFxQjtBQUFBLEVBQ3JCLGVBQWU7QUFBQSxFQUNmLGtCQUFrQjtBQUFBOzs7QUZKbkIsSUFBTSxZQUFpRDtBQUFBLEVBQ3REO0FBQUEsRUFDQSxTQUFTO0FBQUE7QUFHVixJQUFNLFNBQVMsVUFBVSx1QkFBTztBQUV6QixXQUFXLEtBQThCO0FBQy9DLFNBQVEsVUFBVSxPQUFPLFFBQVMsV0FBRztBQUFBOzs7QURPL0IsSUFBTSxtQkFBd0M7QUFBQSxFQUNwRCxhQUFhO0FBQUE7QUFJUCwwQ0FBb0Msa0NBQWlCO0FBQUEsRUFHM0QsWUFBWSxLQUFVLFFBQTJCO0FBQ2hELFVBQU0sS0FBSztBQUNYLFNBQUssU0FBUztBQUFBO0FBQUEsRUFHZixVQUFnQjtBQUNmLFVBQU0sRUFBRSxnQkFBZ0I7QUFDeEIsU0FBSyxZQUFZO0FBRWpCLFFBQUkseUJBQVEsYUFDVixRQUFRLEVBQUUscUJBQ1YsUUFBUSxFQUFFLHFCQUNWLFlBQVksQ0FBQyxhQUNiLFNBQ0UsVUFB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
